cmake_minimum_required(VERSION 2.8)
project(foo NONE)

function(add_element list_name element_name)
	message("	Adding '${${element_name}}' to list '${${list_name}}'")
	list(APPEND "${list_name}" ${${element_name}})
	list(LENGTH "${list_name}" list_len)
	message("	Result: '${${list_name}}' (length is ${list_len})\n")
	set("${list_name}" "${${list_name}}" PARENT_SCOPE)
endfunction()

message("Adding non-empty element to non-empty list:")
set(mylist "un;deux")
set(element "trois")
foreach(i RANGE 3)
	add_element(mylist element)
endforeach()

message("Adding ''empty'' element to non-empty list:")
set(mylist "uno;dos")
set(element " ")
foreach(i RANGE 3)
	add_element(mylist element)
endforeach()
message("Didn't work the way CGold showed in their tutorial. Has to be space in element so that not really an empty one.\n\n")

message("Adding empty element to empty list:")
set(mylist "")
set(element "")
foreach(i RANGE 3)
add_element(mylist element)
endforeach()
